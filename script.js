const images = [
    {
      src: "img/บทที่1.jpg",
      sound: "sound/บทที่1.mp3",
      text: [
        "ณ ป่าใหญ่แห่งหนึ่ง มีกระต่ายตัวหนึ่งมั่นใจในความเร็วของฝีเท้าตัวเองมาก",
        "และมักพูดโม้โอ้อวดว่าไม่มีใครเทียบเทียมได้",
        "จนวันหนึ่ง เจ้ากระต่ายได้พบกับเต่าที่กำลังเดินต้วมเตี้ยมผ่านมา",
        "เมื่อเห็นดังนั้น เจ้ากระต่ายก็หัวเราะเยาะและพูดล้อเลียนว่า",
        "นี่เจ้าเต่า มัวแต่เดินอืดอาดอย่างนี้ แล้วเมื่อไรจะถึงบ้านกันล่ะเนี่ย",
        "ต่อให้เจ้าเดินนำหน้าไปก่อนครึ่งวัน ข้ายังตามเจ้าทันเลย"
      ],
      textDuration: [6000, 3500, 6000, 4500, 5500, 4000]
    },
    {
      src: "img/บทที่2.webp",
      sound: "sound/บทที่2.mp3",
      text: [
        "เจ้าเต่าได้ยินดังนั้นก็เกิดอาการไม่พอใจ เลยพูดตอบกลับไปว่า",
        "ถึงข้าจะเดินช้า แต่ข้าก็กลับถึงบ้านทุกวัน ถ้าอย่างงั้นเรามาลองวิ่งแข่งกันมั้ยล่ะ",
        "แล้วข้าจะเอาชนะเจ้าให้ดู",
        "กระต่ายเห็นว่าเจ้าเต่าท้าแข่งอย่างนั้นก็ตอบตกลง",
        "พร้อมกับพูดไปอย่างขำ ๆ ว่า ฮ่า ฮ่า ฮ่า โถ...",
        "เจ้าเต่า เชื่องช้าอย่างเจ้าน่ะเหรอ",
        "จะมาชนะกระต่ายที่รวดเร็วอย่างข้าได้ ไม่มีทางหรอก"
      ],
      textDuration: [6500, 6500, 2000, 5000, 4000, 4000, 5000]
    },
    {
      src: "img/บทที่3.jpg",
      sound: "sound/บทที่3.mp3",
      text: [
        "เมื่อถึงวันแข่งขัน",
        "เจ้ากระต่ายได้วิ่งออกจากจุดเริ่มต้นไปด้วยความเร็วเต็มฝีเท้า",
        "แซงหน้าเจ้าเต่าไปไกล",
        "และเมื่อหันหลังกลับไปดูก็ไม่เห็นแม้แต่เงาของเจ้าเต่า",
        "เลยคิดว่าคงอีกนานกว่าเจ้าเต่าจะเดินมาถึงจึงนึกในใจว่า",
        "งั้นข้าของีบเอาแรงสักหน่อยดีกว่า ยังไงก็ชนะอยู่แล้ว",
        "แล้วไม่นานเจ้ากระต่ายก็เผลอหลับไป"
      ],
      textDuration: [2000, 4000, 2000, 4000, 3000, 6500, 3000]
    },
    {
      src: "img/บทที่4.jpg",
      sound: "sound/บทที่4.mp3",
      text: [
        "ส่วนเจ้าเต่าก็ยังคงเดินต้วมเตี้ยม ๆ",
        "อย่างไม่เหน็ดเหนื่อยย่อท้อ",
        "เดินมาเรื่อย ๆ จนเกือบจะถึงเส้นชัย",
        "ด้านกระต่ายที่นอนอยู่แถวนั้นก็สะดุ้งตื่นขึ้น",
        "เห็นรอยเท้าเต่าที่พื้นก็รีบวิ่งตามไป ",
        "แต่ก็ไม่ทันเสียแล้ว เพราะเมื่อเจ้ากระต่าย",
        "วิ่งมาถึงเส้นชัยก็พบว่าเจ้าเต่าที่ตัวเองเคยสบประมาทไว้นั้น",
        "ได้เดินเข้าเส้นชัย เป็นผู้ชนะในการแข่งขันครั้งนี้"
      ],
      textDuration: [3300, 1500, 1500, 4000, 3000, 5000, 3500]
    },
    {
      src: "img/บทที่5.jpg",
      sound: "sound/บทที่5.mp3",
      text: [
        "เหตุการณ์นี้ทำให้เจ้ากระต่ายรู้สึกเสียใจมากที่ต้องมาพ่ายแพ้ให้กับเจ้าเต่า",
        "เพียงเพราะความประมาทของตัวเองนั่นเอง..."
      ],
      textDuration: [6000, 3000]
    },
    {
      src: "img/บทสรุป1.jpg",
      sound: "sound/บทสรุป1.mp3",
      text: [
        "นิทานเรื่องนี้สอนให้รู้ว่า",
        "หากเราใช้ชีวิตอย่างประมาทก็อาจเป็นหนทางที่นำมาสู่ความพ่ายแพ้ได้",
        "ดังเช่นเจ้ากระต่ายตัวนี้ที่ประมาทเลินเล่อ",
        "คิดว่าตัวเองวิ่งได้เร็วกว่า",
        "จึงชะล่าใจ ไม่คิดที่จะพยายามหรือวิ่งแข่งให้สำเร็จ",
        "จนสุดท้ายก็โดนเจ้าเต่าวิ่งแซงเข้าเส้นชัยไปในที่สุด",
        "เช่นเดียวกันกับการเรียน หากเด็ก ๆ ",
        "หลงคิดว่าตัวเองเก่งแล้ว จึงไม่ขยันตั้งใจอ่านหนังสือ",
        "เพื่อนที่เขามีความขยันและมีความพยายามมากกว่า",
        "ก็อาจมีผลการเรียนที่ดีกว่าเราได้"
      ],
      textDuration: [3000, 6000, 3000, 2500, 4000, 3500, 3000, 3500]
    },
    {
      src: "img/บทสรุป2.jpg",
      sound: "sound/บทสรุป2.mp3",
      text: [
        "ส่วนกรณีของเจ้าเต่านั้น",
        "ต้องใช้ความเพียรพยายามอย่างมากจึงจะประสบความสำเร็จ",
        "ถึงแม้ว่าเขาจะเดินช้า แต่ก็ไม่ท้อถอย ",
        "และยังคงก้าวเดินต่อไป แม้ต้องเหน็ดเหนื่อยหรือใช้เวลานานแค่ไหน",
        "แต่สุดท้ายเขาก็สามารถเดินเข้าเส้นชัยได้สำเร็จ ซึ่งหากเด็ก ๆ ",
        "อยากประสบความสำเร็จในชีวิต ก็ควรขยันหมั่นเพียร ตั้งใจเรียน",
        "มีความอดทนและไม่ย่อท้อต่ออุปสรรค ดังข้อคิดที่ว่า",
        "ความพยายามอยู่ที่ไหน ความสำเร็จอยู่ที่นั่นค่ะ"
      ],
      textDuration: [2200, 4000, 2500, 5500, 5000, 5500, 3700]
    },
    {
      src: "img/ตอนจบ.jpg",
      sound: "",
      text: [
        "จบแล้ว...กินข้าวไหม"
      ],
      textDuration: [10000]
    },
];

const textContainer = document.getElementById("text-container");
const storyImage = document.getElementById("story-image");
let currentIndex = 0;
let audio = new Audio();

// ปิดการทำงานของปุ่มเมื่อเริ่มเรื่องราว
document.getElementById("start-button").addEventListener("click", () => {
    document.getElementById("start-button").disabled = true; // ปิดปุ่มเมื่อเริ่มเล่น
    showImageThenPlaySound(); // แสดงภาพก่อน แล้วเล่นเสียงหลังจากนั้น
});

// ฟังก์ชันแสดงภาพก่อน แล้วจึงเล่นเสียงและข้อความ
function showImageThenPlaySound() {
    if (currentIndex >= images.length) {
      textContainer.textContent = "เรื่องราวจบแล้ว!";
      return;
    }

    const currentItem = images[currentIndex];

    // หยุดเสียงถ้ามีเสียงเล่นอยู่
    audio.pause();
    audio.currentTime = 0;

    // โหลดและแสดงภาพ
    storyImage.src = currentItem.src;

    // ตั้งเวลาเพื่อให้ภาพแสดงก่อน (2 วินาทีหรือเวลาที่ต้องการ)
    setTimeout(() => {
        playStoryWithText(); // เริ่มเล่นเสียงและข้อความหลังจากแสดงภาพแล้ว
    }, 2000); // ปรับเวลาตามต้องการ (2 วินาทีในตัวอย่างนี้)
}

// ฟังก์ชันเล่นเสียงและแสดงข้อความทีละกลุ่ม
function playStoryWithText() {
    const currentItem = images[currentIndex];

    // โหลดเสียงและเล่น
    audio.src = currentItem.sound;
    audio.onplay = () => {
        textContainer.textContent = "";
        typeTextGroup(); // เริ่มแสดงข้อความเมื่อเสียงเล่น
    };

    audio.onended = () => {
        currentIndex++;
        showImageThenPlaySound(); // เรียกเพื่อแสดงภาพและเริ่มบทถัดไป
    };

    audio.play();

    // พิมพ์ข้อความทีละกลุ่ม
    let groupIndex = 0;
    function typeTextGroup()
